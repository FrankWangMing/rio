{"version":3,"file":"createShadow.js","sourceRoot":"","sources":["../../src/events/createShadow.ts"],"names":[],"mappings":"AAAA,gDAAgD;AAChD,qDAAqD;AACrD,MAAM,CAAC,MAAM,YAAY,GAAG,CAC1B,CAAY,EACZ,eAA8B,EAC9B,oBAA6B,KAAK,EAClC,EAAE;IACF,IAAI,eAAe,CAAC,MAAM,KAAK,CAAC,IAAI,iBAAiB,EAAE,CAAC;QACtD,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC,qBAAqB,EAAE,CAAC;QACrE,MAAM,MAAM,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,IAAI,CAAgB,CAAC;QAEjE,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QACnC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC;QAC5B,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,OAAO,CAAC;QAC3B,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,KAAK,IAAI,CAAC;QAClC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC;QACpC,MAAM,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;QACpC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAEpC,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAClC,CAAC,CAAC,YAAY,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE1C,OAAO,MAAM,CAAC;IAChB,CAAC;IAED;;;OAGG;IACH,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IAChD,SAAS,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;IACtC,SAAS,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,CAAC;IAC/B,SAAS,CAAC,KAAK,CAAC,GAAG,GAAG,OAAO,CAAC;IAC9B,SAAS,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;IAC/B,SAAS,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;IAChC,SAAS,CAAC,KAAK,CAAC,aAAa,GAAG,MAAM,CAAC;IACvC,SAAS,CAAC,SAAS,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;IAEjD,eAAe,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,EAAE;QAC9B,MAAM,EAAE,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,GAAG,CAAC,qBAAqB,EAAE,CAAC;QACjE,MAAM,MAAM,GAAG,GAAG,CAAC,SAAS,CAAC,IAAI,CAAgB,CAAC;QAElD,MAAM,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;QACnC,MAAM,CAAC,KAAK,CAAC,IAAI,GAAG,GAAG,IAAI,IAAI,CAAC;QAChC,MAAM,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,CAAC;QAC9B,MAAM,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,KAAK,IAAI,CAAC;QAClC,MAAM,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,MAAM,IAAI,CAAC;QACpC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;QAEpC,SAAS,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IAChC,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;IACrC,CAAC,CAAC,YAAY,CAAC,YAAY,CAAC,SAAS,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,OAAO,CAAC,CAAC;IAE7D,OAAO,SAAS,CAAC;AACnB,CAAC,CAAC","sourcesContent":["// Works partially with Linux (except on Chrome)\r\n// We'll need an alternate way to create drag shadows\r\nexport const createShadow = (\r\n  e: DragEvent,\r\n  shadowsToCreate: HTMLElement[],\r\n  forceSingleShadow: boolean = false\r\n) => {\r\n  if (shadowsToCreate.length === 1 || forceSingleShadow) {\r\n    const { width, height } = shadowsToCreate[0].getBoundingClientRect();\r\n    const shadow = shadowsToCreate[0].cloneNode(true) as HTMLElement;\r\n\r\n    shadow.style.position = `absolute`;\r\n    shadow.style.left = `-100%`;\r\n    shadow.style.top = `-100%`;\r\n    shadow.style.width = `${width}px`;\r\n    shadow.style.height = `${height}px`;\r\n    shadow.style.pointerEvents = 'none';\r\n    shadow.classList.add('drag-shadow');\r\n\r\n    document.body.appendChild(shadow);\r\n    e.dataTransfer.setDragImage(shadow, 0, 0);\r\n\r\n    return shadow;\r\n  }\r\n\r\n  /**\r\n   * If there's supposed to be multiple drag shadows, we will create a single container div to store them\r\n   * That container will be used as the drag shadow for the current drag event\r\n   */\r\n  const container = document.createElement('div');\r\n  container.style.position = 'absolute';\r\n  container.style.left = '-100%';\r\n  container.style.top = `-100%`;\r\n  container.style.width = '100%';\r\n  container.style.height = '100%';\r\n  container.style.pointerEvents = 'none';\r\n  container.classList.add('drag-shadow-container');\r\n\r\n  shadowsToCreate.forEach((dom) => {\r\n    const { width, height, top, left } = dom.getBoundingClientRect();\r\n    const shadow = dom.cloneNode(true) as HTMLElement;\r\n\r\n    shadow.style.position = `absolute`;\r\n    shadow.style.left = `${left}px`;\r\n    shadow.style.top = `${top}px`;\r\n    shadow.style.width = `${width}px`;\r\n    shadow.style.height = `${height}px`;\r\n    shadow.classList.add('drag-shadow');\r\n\r\n    container.appendChild(shadow);\r\n  });\r\n\r\n  document.body.appendChild(container);\r\n  e.dataTransfer.setDragImage(container, e.clientX, e.clientY);\r\n\r\n  return container;\r\n};\r\n"]}