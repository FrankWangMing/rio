{"version":3,"file":"movePlaceholder.js","sourceRoot":"","sources":["../../src/events/movePlaceholder.ts"],"names":[],"mappings":"AAEA,MAAM,CAAC,OAAO,UAAU,eAAe,CACrC,GAAiB,EACjB,aAAsB,EAAE,4BAA4B;AACpD,iBAAiC,EAAE,sDAAsD;AACzF,YAAoB,CAAC;IAErB,IAAI,CAAC,GAAG,CAAC,EACP,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;IAEpB,MAAM,KAAK,GAAG,iBAAiB,CAAC;IAEhC,IAAI,KAAK,EAAE,CAAC;QACV,6CAA6C;QAC7C,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;YAClB,CAAC,GAAG,SAAS,CAAC;YACd,CAAC,GAAG,KAAK,CAAC,WAAW,CAAC;YACtB,CAAC,GAAG,KAAK,CAAC,GAAG,CAAC;YACd,CAAC,GAAG,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,UAAU,CAAC;QACtE,CAAC;aAAM,CAAC;YACN,CAAC,GAAG,KAAK,CAAC,UAAU,CAAC;YACrB,CAAC,GAAG,SAAS,CAAC;YACd,CAAC,GAAG,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC,MAAM,CAAC;YAClD,CAAC,GAAG,KAAK,CAAC,IAAI,CAAC;QACjB,CAAC;IACH,CAAC;SAAM,CAAC;QACN,IAAI,aAAa,EAAE,CAAC;YAClB,CAAC,GAAG,aAAa,CAAC,GAAG,GAAG,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC;YAClD,CAAC,GAAG,aAAa,CAAC,IAAI,GAAG,aAAa,CAAC,OAAO,CAAC,IAAI,CAAC;YACpD,CAAC;gBACC,aAAa,CAAC,UAAU;oBACxB,aAAa,CAAC,OAAO,CAAC,KAAK;oBAC3B,aAAa,CAAC,OAAO,CAAC,IAAI;oBAC1B,aAAa,CAAC,MAAM,CAAC,IAAI;oBACzB,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC;YAC7B,CAAC,GAAG,SAAS,CAAC;QAChB,CAAC;IACH,CAAC;IACD,OAAO;QACL,GAAG,EAAE,GAAG,CAAC,IAAI;QACb,IAAI,EAAE,GAAG,CAAC,IAAI;QACd,KAAK,EAAE,GAAG,CAAC,IAAI;QACf,MAAM,EAAE,GAAG,CAAC,IAAI;KACjB,CAAC;AACJ,CAAC","sourcesContent":["import { DropPosition, DOMInfo } from '../interfaces';\r\n\r\nexport default function movePlaceholder(\r\n  pos: DropPosition,\r\n  canvasDOMInfo: DOMInfo, // which canvas is cursor at\r\n  bestTargetDomInfo: DOMInfo | null, // closest element in canvas (null if canvas is empty)\r\n  thickness: number = 2\r\n) {\r\n  let t = 0,\r\n    l = 0,\r\n    w = 0,\r\n    h = 0,\r\n    where = pos.where;\r\n\r\n  const elDim = bestTargetDomInfo;\r\n\r\n  if (elDim) {\r\n    // If it's not in flow (like 'float' element)\r\n    if (!elDim.inFlow) {\r\n      w = thickness;\r\n      h = elDim.outerHeight;\r\n      t = elDim.top;\r\n      l = where === 'before' ? elDim.left : elDim.left + elDim.outerWidth;\r\n    } else {\r\n      w = elDim.outerWidth;\r\n      h = thickness;\r\n      t = where === 'before' ? elDim.top : elDim.bottom;\r\n      l = elDim.left;\r\n    }\r\n  } else {\r\n    if (canvasDOMInfo) {\r\n      t = canvasDOMInfo.top + canvasDOMInfo.padding.top;\r\n      l = canvasDOMInfo.left + canvasDOMInfo.padding.left;\r\n      w =\r\n        canvasDOMInfo.outerWidth -\r\n        canvasDOMInfo.padding.right -\r\n        canvasDOMInfo.padding.left -\r\n        canvasDOMInfo.margin.left -\r\n        canvasDOMInfo.margin.right;\r\n      h = thickness;\r\n    }\r\n  }\r\n  return {\r\n    top: `${t}px`,\r\n    left: `${l}px`,\r\n    width: `${w}px`,\r\n    height: `${h}px`,\r\n  };\r\n}\r\n"]}